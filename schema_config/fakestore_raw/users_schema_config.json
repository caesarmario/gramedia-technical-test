{
  "_config": {
    "table": "users",
    "array_path": "data",
    "primary_key": ["user_id"],
    "partition_by": ["load_dt"]
  },
  "user_id":      { "mapping": "id", "data_type": "INTEGER", "transformation": null, "validation": "not_null" },
  "username":     { "mapping": "username", "data_type": "STRING", "transformation": "trim_lower", "validation": null },
  "email":        { "mapping": "email", "data_type": "STRING", "transformation": "lowercase", "validation": "validate_email" },
  "email_domain": { "mapping": "email", "data_type": "STRING", "transformation": "email_domain", "validation": null },
  "password_hash":{ "mapping": "password", "data_type": "STRING", "transformation": "hash_sha256", "validation": null },
  "first_name":   { "mapping": "name.firstname", "data_type": "STRING", "transformation": "titlecase", "validation": null },
  "last_name":    { "mapping": "name.lastname",  "data_type": "STRING", "transformation": "titlecase", "validation": null },
  "full_name":    { "mapping": null, "data_type": "STRING", "transformation": "concat(first_name,' ',last_name)", "validation": null },
  "phone":        { "mapping": "phone", "data_type": "STRING", "transformation": "normalize_phone", "validation": null },
  "addr_street":  { "mapping": "address.street", "data_type": "STRING", "transformation": "titlecase", "validation": null },
  "addr_number":  { "mapping": "address.number", "data_type": "INTEGER", "transformation": null, "validation": null },
  "addr_city":    { "mapping": "address.city",   "data_type": "STRING", "transformation": "titlecase", "validation": null },
  "addr_zipcode": { "mapping": "address.zipcode","data_type": "STRING", "transformation": null, "validation": "validate_zipcode" },
  "geo_lat":      { "mapping": "address.geolocation.lat",  "data_type": "FLOAT", "transformation": "to_float", "validation": "validate_latitude" },
  "geo_lon":      { "mapping": "address.geolocation.long", "data_type": "FLOAT", "transformation": "to_float", "validation": "validate_longitude" },
  "source_url":   { "mapping": "meta.source", "data_type": "STRING", "transformation": null, "validation": null },
  "fetched_at":   { "mapping": "meta.fetched_at", "data_type": "DATETIME", "transformation": null, "validation": "validate_timestamp" },
  "batch_id":     { "mapping": "batch_id", "data_type": "STRING", "transformation": null, "validation": null },
  "load_dt":      { "mapping": "load_dt", "data_type": "TIMESTAMP", "transformation": null, "validation": null }
}
